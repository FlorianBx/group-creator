<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="groupes, personnes, créer, création, makegroups" />
    <meta name="author" content="Florian Beaumont" />
    <meta
      name="description"
      content="Outil de création de groupes aléatoires - Idéal pour organiser des équipes de travail ou des groupes d'étude"
    />
    <meta
      name="keywords"
      content="créateur de groupes, générateur de groupes, groupes aléatoires, organisation d'équipes"
    />
    <meta name="robots" content="index, follow" />
    <title>Créateur de Groupes - Générateur de groupes aléatoires</title>
    <link rel="canonical" href="https://gg.netlify.app/" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <title>Créateur de Groupes</title>
    <link href="/dist/output.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
  </head>
  <body class="bg-gray-100 p-8">
    <div
      class="max-w-4xl mx-auto"
      x-data="{
        people: [],
        newPerson: '',
        groupSize: 4,
        groups: [],
        error: '',
        
        addPerson() {
            if (this.newPerson.trim()) {
                this.people.push(this.newPerson.trim());
                this.newPerson = '';
                this.error = '';
            }
        },
        
        removePerson(index) {
            this.people.splice(index, 1);
        },
        
        createGroups() {
            if (this.people.length === 0) {
                this.error = 'Veuillez ajouter des personnes à la liste';
                return;
            }
            
            if (this.groupSize <= 0) {
                this.error = 'La taille des groupes doit être positive';
                return;
            }
            
            // Mélanger la liste
            const shuffled = [...this.people].sort(() => Math.random() - 0.5);
            
            // Calculer le nombre de groupes optimal
            const numGroups = Math.ceil(shuffled.length / this.groupSize);
            
            // Créer les groupes
            this.groups = Array.from({ length: numGroups }, () => []);
            
            shuffled.forEach((person, index) => {
                const groupIndex = index % numGroups;
                this.groups[groupIndex].push(person);
            });
            
            this.error = '';
        },

		    loadSeptember2024() {
            this.people = [
                'Vania GONCALVES',
                'Mathieu BOURDIER',
                'Calista VOLGET',
                'Yacine DAHMOUN',
                'Cherif GUEYE',
                'Erwan LE GOFF',
                'Denis DECHAMBRE',
                'Abdelkrim BECHIR',
                'Anis MERABTENE',
                'Mike GERLINGER',
                'Steven SU',
                'Mohamed EL AKROUCHE',
                'Toufik ELSHAKH',
                'Jason Natanael Arisa RAJAONARIMANANA',
                'Lucas MACHARD',
                'Harold BUSSON',
                'Liliane LANDAU',
                'Arnaud SIMONARD',
                'Linda DEBOU'
            ];
			},

        importJSON() {
            try {
                const input = JSON.parse(this.newPerson);
                if (Array.isArray(input)) {
                    this.people = input;
                    this.newPerson = '';
                    this.error = '';
                } else {
                    this.error = 'Le format JSON doit être un tableau de noms';
                }
            } catch (e) {
                this.error = 'Format JSON invalide';
            }
        }
    }"
    >
      <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
        <h1 class="text-2xl font-bold mb-6 text-gray-800">Créateur de Groupes</h1>

        <div class="mb-6">
          <div class="flex gap-4 mb-4">
            <input
              type="text"
              x-model="newPerson"
              @keyup.enter="addPerson()"
              placeholder="Nom de la personne ou JSON"
              class="flex-1 p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:outline-none"
            />
            <button
              @click="addPerson()"
              class="px-4 py-2 bg-blue-500 text-black rounded hover:bg-blue-600 focus:outline-none"
            >
              Ajouter
            </button>
            <button
              @click="importJSON()"
              class="px-4 py-2 bg-green-500 text-black rounded hover:bg-green-600 focus:outline-none"
            >
              Import JSON
            </button>
            <button
              @click="loadSeptember2024()"
              class="px-4 py-2 bg-blue-500 text-black rounded hover:bg-green-600 focus:outline-none"
            >
              Sept 2024
            </button>
          </div>

          <div class="flex gap-4 items-center">
            <label for="groupSize" class="text-gray-700">Taille des groupes:</label>
            <input
              name="groupSize"
              id="groupSize"
              type="number"
              x-model="groupSize"
              min="1"
              class="w-20 p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:outline-none"
            />
            <button
              @click="createGroups()"
              class="px-4 py-2 bg-purple-500 text-black rounded hover:bg-purple-600 focus:outline-none"
            >
              Créer les groupes
            </button>
          </div>
        </div>

        <div x-show="error" x-text="error" class="p-4 mb-6 bg-red-100 text-red-700 rounded"></div>

        <div class="mb-8">
          <h2 class="text-xl font-semibold mb-4 text-gray-700">
            Liste des personnes (<span x-text="people.length"></span>)
          </h2>
          <div class="flex flex-wrap gap-2">
            <template x-for="(person, index) in people" :key="index">
              <div class="flex items-center gap-2 bg-gray-100 px-3 py-1 rounded">
                <span x-text="person"></span>
                <button
                  @click="removePerson(index)"
                  class="text-red-500 hover:text-red-700 focus:outline-none"
                >
                  ×
                </button>
              </div>
            </template>
          </div>
        </div>

        <div x-show="groups.length > 0">
          <h2 class="text-xl font-semibold mb-4 text-gray-700">Groupes générés</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <template x-for="(group, index) in groups" :key="index">
              <div class="border rounded p-4 bg-gray-50">
                <h3 class="font-semibold mb-2" x-text="'Groupe ' + (index + 1)"></h3>
                <ul class="space-y-1">
                  <template x-for="(person, personIndex) in group" :key="personIndex">
                    <li x-text="person"></li>
                  </template>
                </ul>
              </div>
            </template>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/main.js"></script>
  </body>
</html>
